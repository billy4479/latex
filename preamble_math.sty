\NeedsTeXFormat{LaTeX2e}[1994/06/01]
\ProvidesPackage{preamble_math}
[2024/03/27 Preamble Math]

% *------------------*
% | *** Packages *** |
% *------------------*

\RequirePackage{amssymb}   % for varnothing and other weirds symbols
\RequirePackage{amsmath}   % basically everything
\RequirePackage{mathtools} % for underbrace, arrows, and a lot of other things
\RequirePackage{mathrsfs}  % for "mathscr"
\RequirePackage{bm}        % for bold math symbols
\RequirePackage{physics}   % for derivatives and lots of operators
\RequirePackage{cancel}    % for canceling terms

% *-------------------*
% | *** Shortcuts *** |
% *-------------------*

% Operators
\newcommand{\gt}{>}
\newcommand{\lt}{<}
\newcommand{\indep}{\perp \!\!\! \perp}

% Sets
\newcommand{\C}{\mathbb{C}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\Z}{\mathbb{Z}}

% Big-O and small-o notation
\renewcommand{\O}{\mathcal{O}}
% https://tex.stackexchange.com/questions/191059/how-to-get-a-small-letter-version-of-mathcalo
\renewcommand{\o}{
    \mathchoice
    {{\scriptstyle\mathcal{O}}}% \displaystyle
    {{\scriptstyle\mathcal{O}}}% \textstyle
    {{\scriptscriptstyle\mathcal{O}}}% \scriptstyle
    {\scalebox{.6}{$\scriptscriptstyle\mathcal{O}$}}%\scriptscriptstyle
}

\newcommand{\half}{\frac{1}{2}}

% *-------------------*
% | *** Utilities *** |
% *-------------------*

% Skip line after theorem or proof title, useful when using itemize or enumerate
\newcommand{\skiplineafterproof}{$ $\par\nobreak\ignorespaces}

% Use underbar in math mode to define vectors
% Sorcery taken from https://tex.stackexchange.com/a/163284
\makeatletter
\def\munderbar#1{\underline{\sbox\tw@{$#1$}\dp\tw@\z@\box\tw@}}
\makeatother

\newcommand{\uvec}[1]{\munderbar{\bm{#1}}}

% *-------------------*
% | *** Theorems *** |
% *-------------------*

% yes, i know, the formatting sucks

\RequirePackage{amsthm}    % for theorem styles
\RequirePackage{thmtools}  % for "declaretheorem"
\RequirePackage{tcolorbox} % for boxes around theorems

\theoremstyle{definition}

% theorem
\declaretheorem[
    numberwithin=section,
    numbered=yes,
    refname={Thm.},
    preheadhook={
            \begin{tcolorbox}[
                    parbox=false,
                    arc=0mm,
                    blanker,
                    left=1em,
                    top=0.5em,
                    bottom=0.5em,
                    borderline west={0.25em}{0pt}{red}
                ]
                },
                postfoothook={
            \end{tcolorbox}
        }
]{theorem}

% corollary
\declaretheorem[
    numberwithin=theorem,
    numbered=yes,
    refname={Cor.},
    preheadhook={
            \begin{tcolorbox}[
                    parbox=false,
                    arc=0mm,
                    blanker,
                    left=1em,
                    top=0.5em,
                    bottom=0.5em,
                    borderline west={0.25em}{0pt}{yellow}
                ]
                },
                postfoothook={
            \end{tcolorbox}
        }
]{corollary}

% lemma
\declaretheorem[
    sibling=theorem,
    numbered=yes,
    preheadhook={
            \begin{tcolorbox}[
                    parbox=false,
                    arc=0mm,
                    blanker,
                    left=1em,
                    top=0.5em,
                    bottom=0.5em,
                    borderline west={0.25em}{0pt}{yellow}
                ]
                },
                postfoothook={
            \end{tcolorbox}
        }
]{lemma}

% proposition
\declaretheorem[
    sibling=theorem,
    numbered=yes,
    refname={Prop.},
    preheadhook={
            \begin{tcolorbox}[
                    parbox=false,
                    arc=0mm,
                    blanker,
                    left=1em,
                    top=0.5em,
                    bottom=0.5em,
                    borderline west={0.25em}{0pt}{orange}
                ]
                },
                postfoothook={
            \end{tcolorbox}
        }
]{proposition}

% definition
\declaretheorem[
    numberwithin=section,
    numbered=yes,
    refname={Def.},
    preheadhook={
            \begin{tcolorbox}[
                    parbox=false,
                    arc=0mm,
                    blanker,
                    left=1em,
                    top=0.5em,
                    bottom=0.5em,
                    borderline west={0.25em}{0pt}{cyan}
                ]
                },
                postfoothook={
            \end{tcolorbox}
        }
]{definition}

% example
\declaretheorem[
    numberwithin=section,
    numbered=yes,
    preheadhook={
            \begin{tcolorbox}[
                    parbox=false,
                    arc=0mm,
                    blanker,
                    left=1em,
                    top=0.5em,
                    bottom=0.5em,
                    borderline west={0.25em}{0pt}{green}
                ]
                },
                postfoothook={
            \end{tcolorbox}
        }
]{example}

\theoremstyle{remark}

% remark
\declaretheorem[
    numbered=no,
    preheadhook={
            \begin{tcolorbox}[
                    parbox=false,
                    arc=0mm,
                    blanker,
                    left=1em,
                    top=0.5em,
                    bottom=0.5em,
                    borderline west={0.25em}{0pt}{gray}
                ]
                },
                postfoothook={
            \end{tcolorbox}
        }
]{remark}


% *-------------------*
% | *** Equation *** |
% *-------------------*

\numberwithin{equation}{subsection}
\def\equationautorefname{Eq.} % Autoref

\endinput
